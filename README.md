# 大老二（Big 2）— 網頁版 · 系列戰 v9

這是一個可以**直接在瀏覽器離線遊玩**的大老二遊戲。特色包含：  
- ✅ **完整牌型**（單張、對子、三條、順子(僅 5 張)、葫蘆、鐵支、同花順）與**炸彈壓制規則**  
- ✅ **強化 AI**（會主動走五張/多張組合，不再只丟單張）  
- ✅ **提示系統**（自動列出「當前可出的組合」，可按牌型篩選，點一下直接幫你選牌）  
- ✅ **系列戰計分**（起始 10000，**贏家吃分**，有人 ≤ 0 立即結算排名）  
- ✅ **行動裝置優化**（直式時自動兩排手牌、操作鈕集中、面板不遮擋）  
- ✅ 完全**本機端**執行，無需伺服器、無外部套件與網路

---

## 🚀 快速開始
1. 解壓縮專案壓縮檔。  
2. 直接用瀏覽器開啟 `index.html`（建議 Chrome / Edge / Safari 最新版）。  
3. 看到畫面後即可開始遊玩。

> 注意：若使用 Safari 開啟本機檔案遇到權限或樣式問題，請嘗試「允許本機檔案存取」或改用 Chrome/Edge。

---

## 🎮 操作說明
- **選牌**：點一下手牌即可選取/取消；已選的牌會**上浮**。  
- **出牌**：按「出牌」。首攻時必須包含 **♣3**。  
- **PASS**：只有在「有人出牌且輪到你跟」時才能 PASS。拿到出牌權時不可 PASS。  
- **提示**：按「提示」會在畫面中央跳出面板：  
  - 預設只列出**合法可出**、**能壓過當前牌面**（如有）的組合  
  - 上方可用**牌型籤**篩選（單張 / 對子 / 三條 / 順子 / 葫蘆 / 鐵支 / 同花順）  
  - 點任一組合，系統會幫你在手牌**自動勾選**該組合（關閉提示面板後按「出牌」即可）  
- **重發**：重新隨機發牌，分數不變。  
- **重置分數**：畫面**左上角**的浮動按鈕可一鍵把四家分數重設為 **10000**。

---

## 🀄️ 規則（已在此版本實作）
- **使用牌數**：標準 52 張（無大小王），4 人各 13 張。  
- **牌點大小**：`2 > A > K > Q > J > 10 > 9 > 8 > 7 > 6 > 5 > 4 > 3`。  
- **花色大小**：`♠ > ♥ > ♦ > ♣`；相同點數時比花色。**最小**為 `♣3`、**最大**為 `♠2`。  
- **首攻**：持有 `♣3` 的玩家先出，且**首攻那手必須含 `♣3`**。  
- **牌型**：
  - 單張、對子、三條  
  - **順子**：僅允許 **5 張連續**（例如 `7-8-9-10-J`），不可 6 張以上  
  - 葫蘆（`三條 + 對子`）  
  - 鐵支（四張同點數）  
  - 同花順（同花色且 5 張連續）  
- **跟牌**：必須**同牌型**且**比大**；否則 PASS。  
- **大小比較**：
  - 同牌型以「**最高張**的點數」比較，再以**花色**決定勝負。  
  - **炸彈壓制**：  
    - **鐵支** 可壓制：葫蘆、順子、對子  
    - **同花順** 可壓制：鐵支、葫蘆、順子、對子（具有**更高優先權**）  
- **連 PASS**：若一圈中其他三家都 PASS，最後出牌者取得**出牌權**（此時下一手不可 PASS）。  
- **結束**：任一玩家手牌用盡即結束當局。

> 提醒：有些地區玩法包含「下一家剩 1 張時限制出最大牌」等特殊條款，本版本**未啟用**此條款，若需要可再行擴充。

---

## 📈 計分與系列戰
- **起始分數**：每位玩家 **10000 分**。  
- **當局結算**：  
  - **贏家吃分**：贏家獲得「**所有仍有手牌玩家**」的懲罰分總和。  
  - **輸家懲罰**：
    - 每張未出手牌：`-10 分`  
    - 若剩牌 **≥ 8 張**：再 `×2`  
    - 若手牌中仍有 **任一張 2**：再 `×2`  
    - 若手牌中存在 **鐵支**：再 `×2`  
    - 若手牌中存在 **同花順**：再 `×2`  
  - 單局結束會跳出**結算面板**（列出各家本局增減與原因），需按「**繼續**」才會開下一局。  
- **系列戰結束**：當任一玩家分數 **≤ 0**，立刻顯示**總排名**並可選擇「重新開新系列（分數重置 10000）」。  
- **儲存**：分數以 `localStorage` 保存於瀏覽器本機。

---

## 🤖 AI 策略（v8+ 強化）
- **首攻/重獲出牌權**：偏好用**五張或多張手**帶牌，優先序：  
  `順子 → 葫蘆 → 三條 → 對子 → 單張`  
  若偵測到對手有人**只剩 ≤ 2 張**，則會考慮使用 **同花順/鐵支** 直接封鎖。  
- **跟牌**：
  1) 優先找**同牌型**裡「**最低成本**」且能壓過的組合；  
  2) 若沒有，才會考慮用 **鐵支/同花順** 反制過牌。  
- **效率**：採用**動態列舉**所有可行組合並評分排序；順子僅列舉 5 張，避免爆量與卡頓。

> 想更兇？可再加入「拆牌代價」「末盤保 2」「花色平衡」「對家張數預判」等高階啟發式，請告訴我你偏好的風格（偏穩/偏攻/打散牌型與否）。

---

## 🧠 提示系統
- 點「提示」會列出**依當前局面可合法出**的組合；若場上已有牌，僅列出**能壓過的**。  
- 可用**牌型籤**篩選；點任一組合會在你的手牌上**自動勾選**。

---

## 📱 介面設計重點
- **戰況區**在直式視窗會**縮小高度**，避免遮到左右兩家的**剩餘牌數**。  
- **操作列**（出牌 / PASS / 提示 / 重發）集中在中央面板下方。  
- **直式螢幕**：若一排容納不下，手牌自動切換成**兩排**且**卡片自動縮放**。  
- 其他玩家只顯示**剩餘張數**，**不顯示牌面**。

---

## 🧩 自訂與擴充（程式內可調整）
- **卡片大小**：在 CSS `:root` 中調整 `--card-w / --card-h`。  
- **行動版比例**：在 `@media (max-width: 820px)` 區塊調整 `#centerPanel` 寬度/`#logCenter` 高度。  
- **AI 風格**：在 `pickLeaderCombo()` 與 `pickResponseCombo()` 調整牌型優先序或加入評分。  
- **順子規則**：目前限定 **5 張**；若需 5+ 任意長度，可在 `combos()` 內改動列舉方式。  
- **計分倍率**：在 `endRound()` 內可微調各倍數條件。

---

## 🗂️ 檔案結構
```
/（解壓根目錄）
├─ index.html   # 單檔即用，含 HTML/CSS/JS
└─ README.md    # 本說明
```

---

## 🧪 相容性建議
- 建議使用 **Chrome 109+ / Edge 109+ / Safari 16+**。  
- iOS Safari 建議關閉低電量模式以避免動畫與計時器被節流。

---

## ❓ 常見問題（FAQ）
**Q1：提示面板位置跑掉？**  
A：v7 之後已修正，採固定置中＋遮罩。若仍出現，請刷新頁面或清空快取。

**Q2：選牌後按「出牌」沒反應？**  
A：可能是組合不合法、或未能壓過當前牌型。請用「提示」查看當前可出的組合。

**Q3：想把戰況隱藏，或縮到更小？**  
A：修改 CSS 中 `#logCenter { height: ... }` 或直接在小尺寸下用 `display:none;`。

**Q4：分數想重來？**  
A：按左上角「重置分數(10000)」，或清空瀏覽器的 localStorage。

---

## 📜 授權
本專案供學習與個人娛樂使用。撲克牌符號為文字字元，無圖檔素材。你可自由修改 `index.html` 以符合你的使用情境。

---

## 🧩 版本記錄（重點）
- v8：AI 強化（會主動出對子/三條/五張手；跟牌先同型最省，必要時炸）  
- v7：提示面板位置修正（置中＋遮罩＋手機優化）  
- v6：**贏家吃分**、直式 UI 微調、重置分數移至左上角  
- v5：單局結算面板（需按「繼續」才開下一局）  

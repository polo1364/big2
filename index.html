<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>å¤§è€äºŒ â€” ä»‹é¢é‡è¨­ï¼‹è¨ˆåˆ†æ¨¡å¼ï¼ˆç³»åˆ—æˆ°ï¼‰</title>
<style>
:root{
  --card-w:56px;--card-h:80px;--gap:6px;--panel-w:min(92vw,980px);
  --pile-w:42px;--pile-h:58px;--primary:#3aa7ff;--primary-dark:#1c86d8;
  --bg:#0f1720;--bg2:#14202c;--glass:rgba(255,255,255,.06);
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{margin:0;background:radial-gradient(#162333,#0b121a);color:#e6eef6;font-family:"Microsoft JhengHei",system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;user-select:none;overflow:hidden}
h1{margin:10px 0 6px;font-weight:800;letter-spacing:.5px;font-size:18px}
#stage{position:relative;width:100%;height:100dvh;display:grid;grid-template-rows:auto 1fr auto}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:6px 10px}
.topbar .left, .topbar .right{display:flex;gap:8px;align-items:center}
button{border:none;border-radius:10px;background:var(--primary);color:#fff;padding:9px 14px;min-height:40px;cursor:pointer;font-weight:700}
button:hover{background:var(--primary-dark)}
button:disabled{opacity:.5;cursor:not-allowed}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,.18)}
.table{position:relative;flex:1;display:grid;grid-template-columns:1fr auto 1fr;grid-template-rows:1fr auto 1fr;height:100%;gap:6px}
.player{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px}
.name{font-weight:800;letter-spacing:.5px}
.score{font-size:12px;opacity:.9;background:#0d2535;border:1px solid rgba(255,255,255,.16);padding:2px 6px;border-radius:999px}
.hand{display:flex;gap:var(--gap);max-width:96vw;overflow-x:auto;padding:2px;touch-action:pan-x}
.card{
  width:var(--card-w);height:var(--card-h);min-width:var(--card-w);
  background:#fff;border-radius:10px;border:2px solid #cfd8dc;color:#0e141a;
  display:flex;align-items:center;justify-content:center;font-weight:800;font-size:18px;
  transition:transform .18s, border-color .18s, box-shadow .18s
}
.card.â™¥,.card.â™¦{color:#d11}
.selected{transform:translateY(-12px);border-color:#ffd866;box-shadow:0 6px 14px rgba(255,216,102,.4)}
.dim{opacity:.5;pointer-events:none}
#centerPanel{
  grid-column:2;grid-row:2;
  width:min(92vw, 980px);
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.14);
  border-radius:16px;padding:10px 14px;backdrop-filter:blur(6px);
  display:flex;flex-direction:column;align-items:center;gap:6px
}
#info{font-size:14px;opacity:.9}
#last{font-size:13px;opacity:.75;min-height:18px}
#pile{display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
.pile-card{width:var(--pile-w);height:var(--pile-h);background:#fff;border-radius:10px;border:2px solid #cfd8dc;display:flex;align-items:center;justify-content:center;
  font-weight:800;font-size:14px}
.pile-card.â™¥,.pile-card.â™¦{color:#d11}
#logCenter{width:100%;max-width:920px;height:120px;overflow-y:auto;border:1px dashed rgba(255,255,255,.18);border-radius:12px;padding:8px;background:rgba(0,0,0,.18);font-size:12px}
.log-entry{opacity:.95;margin-bottom:4px}
.actionRow{grid-column:2;display:flex;gap:10px;justify-content:center;margin-top:4px;flex-wrap:wrap}
#p-top{grid-column:2;grid-row:1}
#p-left{grid-column:1;grid-row:2;transform:rotate(-90deg)}
#p-right{grid-column:3;grid-row:2;transform:rotate(90deg)}
#p-bottom{grid-column:2;grid-row:3}
#p-left .hand, #p-right .hand{display:none}
/* ç³»åˆ—æˆ°çµç®—é¢æ¿ */
#seriesOverlay{
  position:fixed;inset:0;background:rgba(0,0,0,.65);backdrop-filter:blur(4px);
  display:none;align-items:center;justify-content:center;z-index:20
}
#seriesCard{
  width:min(92vw,600px);background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.18);border-radius:16px;padding:16px
}
#seriesCard h2{margin:0 0 10px;font-size:20px;letter-spacing:.6px}
.rank-list{margin:8px 0 12px;padding:0;list-style:none}
.rank-item{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-radius:10px;background:rgba(0,0,0,.22);border:1px solid rgba(255,255,255,.12);margin-bottom:8px}
.rank-item .who{font-weight:800}
.rank-item .pts{opacity:.95}
/* æ‰‹æ©Ÿå„ªåŒ– */
@media (max-width: 820px){
  :root{--card-w:46px;--card-h:66px;--gap:4px;--pile-w:36px;--pile-h:50px}
  #p-left, #p-right{transform:none}
  #p-left .hand, #p-right .hand{display:none}
  #centerPanel{width:96vw}
  #logCenter{height:24vh}
}
</style>
</head>
<body>
<div id="stage">
  <div class="topbar">
    <div class="left">
      <h1>å¤§è€äºŒ</h1>
      <button class="btn-ghost" id="resetScoreBtn">é‡ç½®åˆ†æ•¸</button>
    </div>
    <div class="right">
      <button class="btn-ghost" id="hintBtn">æç¤º</button>
      <button id="dealBtn">é‡ç™¼</button>
    </div>
  </div>

  <div class="table">
    <div id="p-top" class="player"><div class="name" id="name-top"></div><div class="score" id="score-top">0 åˆ†</div><div class="hand" id="hand-top"></div><div class="count" id="cnt-top"></div></div>
    <div id="p-left" class="player"><div class="name" id="name-left"></div><div class="score" id="score-left">0 åˆ†</div><div class="hand" id="hand-left"></div><div class="count" id="cnt-left"></div></div>
    <div id="centerPanel">
      <div id="info">è¼‰å…¥ä¸­â€¦</div>
      <div id="last"></div>
      <div id="pile"></div>
      <div id="logCenter"></div>
      <div class="actionRow">
        <button id="playBtn" disabled>å‡ºç‰Œ</button>
        <button id="passBtn" disabled>PASS</button>
      </div>
    </div>
    <div id="p-right" class="player"><div class="name" id="name-right"></div><div class="score" id="score-right">0 åˆ†</div><div class="hand" id="hand-right"></div><div class="count" id="cnt-right"></div></div>
    <div id="p-bottom" class="player">
      <div class="name" id="name-bottom">ä½ </div>
      <div class="score" id="score-bottom">0 åˆ†</div>
      <div class="hand" id="hand-bottom"></div>
      <div class="count" id="cnt-bottom"></div>
    </div>
  </div>
</div>

<!-- ç³»åˆ—æˆ°çµç®— -->
<div id="seriesOverlay" role="dialog" aria-modal="true">
  <div id="seriesCard">
    <h2>ç³»åˆ—æˆ°çµç®—</h2>
    <ul class="rank-list" id="rankList"></ul>
    <div style="display:flex;gap:10px;justify-content:center">
      <button id="restartSeriesBtn">é‡æ–°é–‹æ–°ç³»åˆ—ï¼ˆåˆ†æ•¸é‡ç½® 10000ï¼‰</button>
      <button class="btn-ghost" id="closeSeriesBtn">é—œé–‰</button>
    </div>
  </div>
</div>

<script>
/* ====== è³‡æ–™çµæ§‹ ====== */
const SUITS=['â™£','â™¦','â™¥','â™ '],RANKS=['3','4','5','6','7','8','9','10','J','Q','K','A','2'];
const suitOrder={'â™£':0,'â™¦':1,'â™¥':2,'â™ ':3};
const rIdx=r=>RANKS.indexOf(r);
const compareCard=(a,b)=>(rIdx(a.rank)-rIdx(b.rank))||(suitOrder[a.suit]-suitOrder[b.suit]);
let deck=[],players=[[],[],[],[]],turn=0,currentPlay=null,lastWinner=-1,firstTrick=true,names=[],scores=[10000,10000,10000,10000];

const $ = s => document.querySelector(s);
const logBox = $('#logCenter');
const info = t => $('#info').innerText=t;
const setLast = t => $('#last').innerText=t||'';
function logPush(t){ const d=document.createElement('div'); d.className='log-entry'; d.textContent=t; logBox.prepend(d); }

function randName(){const a="ç‹æå¼µé™³æ—å³é»ƒè”¡æ¥Šè¨±é„­ä½•éƒ­ç¾…é«˜èƒ¡è•­æ½˜æ±Ÿé¾æ›¾è³´å‘‚å­«é­è‘‰é˜®é‚±å½­é¡è¬å®‹å”é¦®é‚µéŸ“æ›¹é‚¢é¡§";
const b="å‡±å®‡å®¶è±ªå¿—å‰å† å»·å»ºå®å¿—è±ªä¿Šå‚‘æ˜å“²å† éœ–ä¿Šå®‡æ‰¿ç¿°æŸå®‡å®—æ†²æ€¡å›æ¬£æ€¡é›…å©·é›…é›¯ä½³è“‰ä½©çŠæƒ é›¯å¿—ç²ç¾ç²";
return a[Math.floor(Math.random()*a.length)]+b[Math.floor(Math.random()*b.length)]+(Math.random()<.5?b[Math.floor(Math.random()*b.length)]:'');}

function saveScores(){ localStorage.setItem('big2_scores', JSON.stringify(scores)); }
function loadScores(){
  try{
    const s = JSON.parse(localStorage.getItem('big2_scores'));
    if(Array.isArray(s) && s.length===4) scores = s;
    else scores = [10000,10000,10000,10000];
  }catch{ scores=[10000,10000,10000,10000]; }
  updateScoreUI();
}
function updateScoreUI(){
  ['bottom','right','top','left'].forEach((pos,i)=>{ $('#score-'+pos).innerText = (scores[i]||0)+' åˆ†'; });
}

/* ====== ç‰Œçµ„è™•ç† ====== */
function buildDeck(){ deck=[]; for(const s of SUITS) for(const r of RANKS) deck.push({suit:s,rank:r}); }
function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
function findStart(){ for(let i=0;i<4;i++) if(players[i].some(c=>c.rank==='3'&&c.suit==='â™£')) return i; return 0; }

function render(){
  const ids=['hand-bottom','hand-right','hand-top','hand-left'];
  ids.forEach((id,i)=>{
    const area = document.getElementById(id); area.innerHTML='';
    players[i].forEach((c,idx)=>{
      const d=document.createElement('div');
      d.className=`card ${c.suit}`; d.textContent=c.suit+c.rank; d.dataset.idx=idx;
      if(i!==0) d.classList.add('dim');
      area.appendChild(d);
    });
  });
  ['bottom','right','top','left'].forEach((pos,i)=>$('#cnt-'+pos).innerText=players[i].length);
}

$('#hand-bottom').addEventListener('pointerdown', e=>{
  const card=e.target.closest('.card'); if(!card || turn!==0) return;
  card.classList.toggle('selected');
}, {passive:true});

function updateTurnUI(){
  const mine = (turn===0);
  ['playBtn','passBtn'].forEach(id=>{ const el=document.getElementById(id); if(el) el.disabled = !mine; });
  info(mine ? (firstTrick? 'è¼ªåˆ°ä½ ï¼ˆé¦–æ”»éœ€å« â™£3ï¼‰' : 'è¼ªåˆ°ä½ ') : `ç­‰å¾… ${names[turn]} å‡ºç‰Œâ€¦`);
}

/* ====== éŠæˆ²æµç¨‹ ====== */
function deal(){
  names=['ä½ ',randName(),randName(),randName()];
  $('#name-right').innerText=names[1];
  $('#name-top').innerText=names[2];
  $('#name-left').innerText=names[3];
  $('#pile').innerHTML=''; logBox.innerHTML=''; setLast('');
  buildDeck(); shuffle(deck);
  players=[[],[],[],[]];
  for(let i=0;i<52;i++) players[i%4].push(deck[i]);
  players.forEach(p=>p.sort(compareCard));
  currentPlay=null; lastWinner=-1; firstTrick=true; turn=findStart();
  render(); updateTurnUI();
  info(`æŒæœ‰ â™£3 çš„ç©å®¶ï¼ˆ${names[turn]}ï¼‰å…ˆæ”»`);
  if(turn!==0) setTimeout(aiPlay,700);
}

function isConsec(s){ for(let i=1;i<s.length;i++) if(rIdx(s[i].rank)!==rIdx(s[i-1].rank)+1) return false; return true; }
function analyze(cs){
  const n=cs.length, s=[...cs].sort(compareCard);
  if(n===1) return {ok:true,kind:'å–®å¼µ',high:s[0]};
  if(n===2 && s[0].rank===s[1].rank) return {ok:true,kind:'å°å­',high:s[1]};
  if(n===3 && s.every(c=>c.rank===s[0].rank)) return {ok:true,kind:'ä¸‰æ¢',high:s[2]};
  if(n===4 && s.every(c=>c.rank===s[0].rank)) return {ok:true,kind:'éµæ”¯',high:s[3]};
  if(n===5){
    const rc={}; s.forEach(c=>rc[c.rank]=(rc[c.rank]||0)+1);
    const vals=Object.values(rc).sort((a,b)=>b-a);
    const sameSuit=s.every(c=>c.suit===s[0].suit);
    const consec=isConsec(s);
    if(sameSuit&&consec) return {ok:true,kind:'åŒèŠ±é †',high:s[4]};
    if(vals[0]===3&&vals[1]===2){
      const trip=Object.keys(rc).find(r=>rc[r]===3);
      const high=s.filter(c=>c.rank===trip).slice(-1)[0];
      return {ok:true,kind:'è‘«è˜†',high};
    }
    if(consec) return {ok:true,kind:'é †å­',high:s[4]};
  }
  return {ok:false};
}
const strVal={'å–®å¼µ':1,'å°å­':1,'ä¸‰æ¢':1,'é †å­':2,'è‘«è˜†':3,'éµæ”¯':4,'åŒèŠ±é †':5};
function canBeat(a,b){
  if(!b) return true;
  const A=analyze(a), B=analyze(b);
  if(!A.ok) return false;
  if(A.kind===B.kind){
    const r=rIdx(A.high.rank)-rIdx(B.high.rank);
    if(r!==0) return r>0;
    return suitOrder[A.high.suit]>suitOrder[B.high.suit];
  }
  if(A.kind==='éµæ”¯' && (B.kind==='è‘«è˜†'||B.kind==='é †å­'||B.kind==='å°å­')) return true;
  if(A.kind==='åŒèŠ±é †' && (B.kind==='éµæ”¯'||B.kind==='è‘«è˜†'||B.kind==='é †å­'||B.kind==='å°å­')) return true;
  return false;
}

function combos(hand){
  const res=[],map={};
  hand.forEach(c=>(map[c.rank]=map[c.rank]||[]).push(c));
  hand.forEach(c=>res.push([c]));
  for(const r in map){
    const a=map[r];
    if(a.length>=2) for(let i=0;i<a.length;i++) for(let j=i+1;j<a.length;j++) res.push([a[i],a[j]]);
    if(a.length>=3) for(let i=0;i<a.length;i++) for(let j=i+1;j<a.length;j++) for(let k=j+1;k<a.length;k++) res.push([a[i],a[j],a[k]]);
    if(a.length===4) res.push(a.slice());
  }
  const n=hand.length;
  if(n>=5){
    for(let a=0;a<n-4;a++) for(let b=a+1;b<n-3;b++) for(let c=b+1;c<n-2;c++) for(let d=c+1;d<n-1;d++) for(let e=d+1;e<n;e++){
      const pack=[hand[a],hand[b],hand[c],hand[d],hand[e]];
      const an=analyze(pack);
      if(an.ok && (an.kind==='é †å­'||an.kind==='è‘«è˜†'||an.kind==='åŒèŠ±é †')) res.push(pack);
    }
  }
  res.sort((x,y)=>{
    const A=analyze(x),B=analyze(y);
    if(strVal[A.kind]!==strVal[B.kind]) return strVal[A.kind]-strVal[B.kind];
    const r=rIdx(A.high.rank)-rIdx(B.high.rank);
    return r!==0?r:(suitOrder[A.high.suit]-suitOrder[B.high.suit]);
  });
  return res;
}

/* ====== AIï¼ˆç•¥å…‡ï¼‰ ====== */
function aiPlay(){
  const i=turn, hand=players[i];
  if(hand.length===1){ play(i,[hand[0]]); return; }
  const all=combos(hand);
  const enemyAlmostWin = players.some((p,idx)=>idx!==i && p.length<=2);
  let options=[];
  if(!currentPlay) options = firstTrick? all.filter(c=>c.some(x=>x.rank==='3'&&x.suit==='â™£')) : (enemyAlmostWin? all.filter(c=>analyze(c).kind!=='å–®å¼µ') : all);
  else options = all.filter(c=>canBeat(c,currentPlay));
  const filtered=options.filter(c=>{
    const k=analyze(c).kind;
    if((k==='éµæ”¯'||k==='åŒèŠ±é †') && !enemyAlmostWin && hand.length>6) return false;
    return true;
  });
  if(enemyAlmostWin){
    const bomb=options.find(c=>['éµæ”¯','åŒèŠ±é †'].includes(analyze(c).kind));
    if(bomb){ play(i,bomb); return; }
  }
  const choice=(filtered.length?filtered:options)[0];
  if(choice) play(i,choice); else { info(`${names[i]} PASS`); logPush(`${names[i]} PASS`); next(); }
}

/* ====== å‡ºç‰Œèˆ‡å›åˆ ====== */
function toStr(cards){ return cards.map(c=>c.suit+c.rank).join(' '); }
function renderPile(playerName,cards,kind){
  const pile=$('#pile'); pile.innerHTML='';
  const head=document.createElement('div'); head.style.fontSize='12px'; head.style.opacity=.9; head.textContent = `${playerName}ï¼ˆ${kind}ï¼‰`;
  pile.appendChild(head);
  const row=document.createElement('div'); row.style.display='flex'; row.style.gap='8px'; row.style.flexWrap='wrap'; row.style.justifyContent='center';
  cards.forEach(c=>{ const d=document.createElement('div'); d.className='pile-card '+c.suit; d.textContent=c.suit+c.rank; row.appendChild(d); });
  pile.appendChild(row);
}
function play(i,cards){
  cards.forEach(c=>{ const idx=players[i].findIndex(p=>p.rank===c.rank&&p.suit===c.suit); if(idx>-1) players[i].splice(idx,1); });
  render();
  const an=analyze(cards);
  currentPlay=cards; lastWinner=i; firstTrick=false;
  setLast(`${names[i]}ï¼š${toStr(cards)}ï¼ˆ${an.kind}ï¼‰`);
  logPush(`${names[i]} å‡ºï¼š${toStr(cards)}ï¼ˆ${an.kind}ï¼‰`);
  renderPile(names[i],cards,an.kind);
  if(players[i].length===0){ endRound(i); return; }
  next();
}
function next(){
  turn=(turn+1)%4;
  if(players[turn].length===0) turn=(turn+1)%4;
  if(turn===lastWinner){ currentPlay=null; setLast(`${names[turn]} é‡æ–°å‡ºç‰Œ`); $('#pile').innerHTML=''; }
  updateTurnUI();
  if(turn!==0) setTimeout(aiPlay,800);
}
function selected(){ return [...document.querySelectorAll('#hand-bottom .card.selected')].map(el=>players[0][parseInt(el.dataset.idx,10)]); }
function onPlay(){
  if(turn!==0) return;
  const cs=selected();
  if(!cs.length){ info('è«‹å…ˆé¸ç‰Œ'); return; }
  const an=analyze(cs);
  if(!an.ok){ info('ä¸åˆæ³•çµ„åˆ'); return; }
  if(firstTrick && !cs.some(c=>c.rank==='3'&&c.suit==='â™£')){ info('é¦–æ”»å¿…å« â™£3'); return; }
  if(currentPlay && !canBeat(cs,currentPlay)){ info('æ¯”ä¸éå‰å®¶'); return; }
  play(0,cs);
}
function onPass(){ if(turn!==0) return; info('ä½  PASS'); logPush('ä½  PASS'); next(); }

/* ====== è¨ˆåˆ†ã€ç³»åˆ—æˆ°çµç®— ====== */
function hasFourOfKind(hand){
  const rc={}; hand.forEach(c=>rc[c.rank]=(rc[c.rank]||0)+1);
  return Object.values(rc).some(v=>v===4);
}
function hasStraightFlush(hand){
  const bySuit={'â™£':[], 'â™¦':[], 'â™¥':[], 'â™ ':[]};
  hand.forEach(c=>bySuit[c.suit].push(c));
  for(const s in bySuit){
    const arr=bySuit[s].sort(compareCard);
    for(let i=0;i<=arr.length-5;i++){
      const slice=arr.slice(i,i+5);
      if(slice.length===5 && slice.every((c,idx)=>idx===0 || rIdx(c.rank)===rIdx(slice[idx-1].rank)+1)) return true;
    }
  }
  return false;
}
function endRound(winnerIdx){
  const detail=[];
  for(let i=0;i<4;i++){
    if(i===winnerIdx) continue;
    const remain=players[i];
    let pen = remain.length * 10;
    if(remain.length>=8) pen *= 2;
    if(remain.some(c=>c.rank==='2')) pen *= 2;
    if(hasFourOfKind(remain)) pen *= 2;
    if(hasStraightFlush(remain)) pen *= 2;
    scores[i] -= pen;
    detail.push(`${names[i]} -${pen} åˆ†ï¼ˆå‰©${remain.length}å¼µ${remain.length>=8?'ã€â‰¥8åŠ å€':''}${remain.some(c=>c.rank==='2')?'ã€å«2åŠ å€':''}${hasFourOfKind(remain)?'ã€éµæ”¯åŠ å€':''}${hasStraightFlush(remain)?'ã€åŒèŠ±é †åŠ å€':''}ï¼‰`);
  }
  saveScores(); updateScoreUI();
  logPush(`ğŸ ${names[winnerIdx]} è„«æ‰‹ï¼ŒçµæŸæœ¬å±€ã€‚`);
  detail.forEach(t=>logPush('ã€€â€¢ '+t));
  // æª¢æŸ¥æ˜¯å¦æœ‰äººæ­¸é›¶æˆ–ä»¥ä¸‹ â†’ ç³»åˆ—æˆ°çµç®—
  if(scores.some(s=>s<=0)){
    showSeriesOverlay();
  }else{
    setTimeout(deal, 1500);
  }
}

function showSeriesOverlay(){
  const ov = document.getElementById('seriesOverlay');
  const list = document.getElementById('rankList');
  list.innerHTML='';
  // ç”¢ç”Ÿæ’åï¼ˆåˆ†æ•¸é«˜åˆ°ä½ï¼‰
  const arr = [0,1,2,3].map(i=>({i,name:names[i],score:scores[i]}))
                       .sort((a,b)=>b.score-a.score);
  arr.forEach((p,idx)=>{
    const li=document.createElement('li'); li.className='rank-item';
    const medal = idx===0?'ğŸ¥‡':idx===1?'ğŸ¥ˆ':idx===2?'ğŸ¥‰':'ğŸ';
    const who=document.createElement('div'); who.className='who'; who.textContent = `${medal} ${p.name}`+(p.i===0?'ï¼ˆä½ ï¼‰':'');
    const pts=document.createElement('div'); pts.className='pts'; pts.textContent = `${p.score} åˆ†`;
    li.appendChild(who); li.appendChild(pts); list.appendChild(li);
  });
  ov.style.display='flex';
}
function hideSeriesOverlay(){ document.getElementById('seriesOverlay').style.display='none'; }
document.getElementById('restartSeriesBtn').onclick=()=>{
  scores=[10000,10000,10000,10000]; saveScores(); updateScoreUI(); hideSeriesOverlay(); deal();
};
document.getElementById('closeSeriesBtn').onclick=hideSeriesOverlay;

/* ====== ç¶å®š ====== */
document.getElementById('playBtn').onclick=onPlay;
document.getElementById('passBtn').onclick=onPass;
document.getElementById('dealBtn').onclick=deal;
document.getElementById('hintBtn').onclick=()=>{
  const hand=players[0]; let arr=combos(hand);
  if(firstTrick) arr=arr.filter(c=>c.some(x=>x.rank==='3'&&x.suit==='â™£'));
  if(currentPlay) arr=arr.filter(c=>canBeat(c,currentPlay));
  logPush('ğŸ” å¯å‡ºï¼ˆå‰20ï¼‰ï¼š'); arr.slice(0,20).forEach(c=>logPush('ã€€'+toStr(c)+'ï¼ˆ'+analyze(c).kind+'ï¼‰'));
};
document.getElementById('resetScoreBtn').onclick=()=>{ scores=[10000,10000,10000,10000]; saveScores(); updateScoreUI(); logPush('ğŸ”„ åˆ†æ•¸å·²é‡ç½®ç‚º 10000'); };

/* ====== é–‹å§‹ ====== */
loadScores();
deal();
</script>
</body>
</html>
